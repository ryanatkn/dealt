import{t as f,a as l,c as q,b as le}from"../chunks/B-9WnmWB.js";import{p as L,c as s,t as E,a as R,r,ag as ue,w as i,ah as V,_ as X,f as J,x as F,s as c,I as pe}from"../chunks/CsJOpq0I.js";import{e as te,b as Y,r as me,a as ae,P as ge,i as fe,j as he}from"../chunks/BqE_3Jp1.js";import{s as re,d as se}from"../chunks/CS7d4eST.js";import{p as ne,i as P}from"../chunks/CPwzJCGN.js";import{b as ie,g as be,s as C,c as Z}from"../chunks/DK50TLbw.js";import{b as ee}from"../chunks/CyRwifAK.js";import{S as ke,g as je}from"../chunks/BJjicHN9.js";import{U as ye}from"../chunks/BTZBZmS2.js";import{a as we,F as xe,S as Se,H as ze,b as Pe}from"../chunks/8vfzQ6NH.js";import{s as He}from"../chunks/kQ0gKvDQ.js";var Ie=f('<div class="scene_summary svelte-10m7391"><button class="plain svelte-10m7391" type="button"> </button></div>');function Ae(u,n){L(n,!0);const e=te.get();var _=Ie(),a=s(_);a.__click=()=>e.show_scene_menu=!0;var m=s(a,!0);r(a),r(_),E(()=>re(m,n.project.scene.name)),l(u,_),R()}se(["click"]);var Be=f('<div class="display_flex w_100 position_relative"><!> <!></div>'),Ce=f('<div class="project_renderer svelte-17hjpql"><!></div>');function Fe(u,n){L(n,!0);const e=ne(n,"project",7),_=F(()=>e().scene);let a=V(void 0),m=V(void 0);ue(()=>{i(a)!==void 0&&(e().renderer.width=i(a)),i(m)!==void 0&&(e().renderer.height=i(m)/e().renderer_count)});var p=Ce(),j=s(p);{var y=v=>{var w=q(),g=J(w);ie(g,16,()=>ae,h=>h,(h,H)=>{var I=q(),U=J(I);{var x=S=>{var b=Be(),k=s(b);we(k,{get Component(){return me[H]},get scene(){return i(_)},get renderer(){return e().renderer}});var A=c(k,2);He(A,()=>n.children??pe),r(b),l(S,b)};P(U,S=>{e().renderers[H]&&S(x)})}l(h,I)}),l(v,w)};P(j,v=>{v(y)})}r(p),Y(p,"clientWidth",v=>X(a,v)),Y(p,"clientHeight",v=>X(m,v)),l(u,p),R()}var Le=(u,n)=>i(n).save(),Re=(u,n)=>{n().toggle_playing()},Ue=(u,n,e)=>{i(n).toggle_renderer(e)},$e=f('<button type="button"> </button>'),qe=f('<div class="right_sidebar svelte-k28ei"><!></div>'),Ee=f('<div class="project_editor svelte-k28ei"><nav class="top_nav svelte-k28ei"><div class="scene_controls svelte-k28ei"><button class="icon_button plain" type="button">â˜°</button> <button type="button" class="plain">save</button> <button type="button"><!></button> <div class="row"><!></div> <!> <div class="row align_items_stretch shadow_inset_xs pl_md"></div> <div class="row pl_md"><span><!></span></div></div> <!> <header class="display_flex"><div class="row ml_auto"><a class="nav_link svelte-k28ei">demos</a> <a class="nav_link svelte-k28ei">about</a> <a class="nav_link svelte-k28ei" href="https://github.com/ryanatkn/dealt"><!></a></div></header></nav> <div class="content svelte-k28ei"><!> <!></div></div>');function Je(u,n){L(n,!0);const e=ne(n,"editor",7),_=F(()=>e().app),a=F(()=>e().project),m=F(()=>i(a).scene);var p=Ee(),j=s(p),y=s(j),v=s(y);v.__click=function(...t){var o;(o=i(_).open_main_menu)==null||o.apply(this,t)},be(v,"",{},{height:"100%","min-width":"var(--icon_size_md)"});var w=c(v,2);w.__click=[Le,m];var g=c(w,2);let h;g.__click=[Re,e];var H=s(g);{var I=t=>{ge(t,{})},U=t=>{var o=le("play");l(t,o)};P(H,t=>{e().playing?t(I):t(U,!1)})}r(g);var x=c(g,2),S=s(x);xe(S,{}),r(x);var b=c(x,2);Se(b,{get project(){return i(a)}});var k=c(b,2);ie(k,20,()=>ae,t=>t,(t,o)=>{var d=$e();let B;d.__click=[Ue,a,o];var $=s(d,!0);r(d),E(z=>{B=Z(d,1,"deselectable",null,B,z),C(d,"title",fe[o]),re($,o)},[()=>({color_d:i(a).renderers[o]})]),l(t,d)}),r(k);var A=c(k,2),N=s(A),oe=s(N);ze(oe,{}),r(N),r(A),r(y);var O=c(y,2);Ae(O,{get project(){return i(a)}});var W=c(O,2),D=s(W),G=s(D);C(G,"href",`${ee??""}/demo`);var K=c(G,2);C(K,"href",`${ee??""}/about`);var M=c(K,2),ce=s(M);ke(ce,{data:je,size:"var(--icon_size_sm)"}),r(M),r(D),r(W),r(j);var Q=c(j,2),T=s(Q);Fe(T,{get project(){return i(a)},children:(t,o)=>{var d=q(),B=J(d);{var $=z=>{Pe(z,{get scene(){return i(m)},get unit_selection(){return e().unit_selection},get width(){return i(a).renderer.width},get height(){return i(a).renderer.height},get scene_interaction_surface_state(){return e().scene_interaction_surface_state},set scene_interaction_surface_state(de){e().scene_interaction_surface_state=de}})};P(B,z=>{e().editing&&z($)})}l(t,d)},$$slots:{default:!0}});var _e=c(T,2);{var ve=t=>{var o=qe(),d=s(o);ye(d,{get project(){return i(a)}}),r(o),l(t,o)};P(_e,t=>{e().editing&&t(ve)})}r(Q),r(p),E(t=>{h=Z(g,1,"edit_or_play color_d deselectable svelte-k28ei",null,h,t),C(g,"title",`${e().playing?"stop playing":"start playing"} [\` Backtick]`)},[()=>({selected:e().playing})]),l(u,p),R()}se(["click"]);var Ne=f('<main class="svelte-1nzn9u"><!></main>');function Ze(u,n){L(n,!0);const e=te.get();e.project.scene.units.length===0&&e.project.set_json({...e.project.toJSON(),scenes:[he()]});var _=Ne(),a=s(_);Je(a,{editor:e}),r(_),l(u,_),R()}export{Ze as component};
