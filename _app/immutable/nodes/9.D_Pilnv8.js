import{t as f,a as l,c as $,b as le}from"../chunks/DyCZ_lw9.js";import{m as I,c as n,o as E,q as L,r as a,ah as ue,w as i,ai as T,X as V,v as G,x as F,s as c,G as pe}from"../chunks/Dkaln31E.js";import{e as te,b as Y,r as me,a as re,P as ge,i as fe,j as he}from"../chunks/BERuEieG.js";import{s as ae,d as ne}from"../chunks/DMs3BEDJ.js";import{p as se,i as P}from"../chunks/Cr-AO5Xh.js";import{b as ie,g as be,s as C,c as Z}from"../chunks/C07ZAADA.js";import{b as ee}from"../chunks/B1fI4ZJX.js";import{S as ke,g as je}from"../chunks/CzNxE-Hc.js";import{U as ye}from"../chunks/5bIzfVkr.js";import{a as we,F as xe,S as Se,H as ze,b as Pe}from"../chunks/BYEkrTd3.js";import{s as He}from"../chunks/DQXgQxX-.js";var qe=f('<div class="scene_summary svelte-10m7391"><button class="plain svelte-10m7391" type="button"> </button></div>');function Ae(u,s){I(s,!0);const e=te.get();var _=qe(),r=n(_);r.__click=()=>e.show_scene_menu=!0;var m=n(r,!0);a(r),a(_),E(()=>ae(m,s.project.scene.name)),l(u,_),L()}ne(["click"]);var Be=f('<div class="flex w_100 relative"><!> <!></div>'),Ce=f('<div class="project_renderer svelte-17hjpql"><!></div>');function Fe(u,s){I(s,!0);const e=se(s,"project",7),_=F(()=>e().scene);let r=T(void 0),m=T(void 0);ue(()=>{i(r)!==void 0&&(e().renderer.width=i(r)),i(m)!==void 0&&(e().renderer.height=i(m)/e().renderer_count)});var p=Ce(),j=n(p);{var y=v=>{var w=$(),g=G(w);ie(g,16,()=>re,h=>h,(h,H)=>{var q=$(),R=G(q);{var x=S=>{var b=Be(),k=n(b);we(k,{get Component(){return me[H]},get scene(){return i(_)},get renderer(){return e().renderer}});var A=c(k,2);He(A,()=>s.children??pe),a(b),l(S,b)};P(R,S=>{e().renderers[H]&&S(x)})}l(h,q)}),l(v,w)};P(j,v=>{v(y)})}a(p),Y(p,"clientWidth",v=>V(r,v)),Y(p,"clientHeight",v=>V(m,v)),l(u,p),L()}var Ie=(u,s)=>i(s).save(),Le=(u,s)=>{s().toggle_playing()},Re=(u,s,e)=>{i(s).toggle_renderer(e)},Ue=f('<button type="button"> </button>'),$e=f('<div class="right_sidebar svelte-k28ei"><!></div>'),Ee=f('<div class="project_editor svelte-k28ei"><nav class="top_nav svelte-k28ei"><div class="scene_controls svelte-k28ei"><button class="icon_button plain" type="button">â˜°</button> <button type="button" class="plain">save</button> <button type="button"><!></button> <div class="row"><!></div> <!> <div class="row align_items_stretch shadow_inset_xs pl_md"></div> <div class="row pl_md"><span><!></span></div></div> <!> <header class="flex"><div class="row ml_auto"><a class="nav_link svelte-k28ei">demos</a> <a class="nav_link svelte-k28ei">about</a> <a class="nav_link svelte-k28ei" href="https://github.com/ryanatkn/dealt"><!></a></div></header></nav> <div class="content svelte-k28ei"><!> <!></div></div>');function Ge(u,s){I(s,!0);const e=se(s,"editor",7),_=F(()=>e().app),r=F(()=>e().project),m=F(()=>i(r).scene);var p=Ee(),j=n(p),y=n(j),v=n(y);v.__click=function(...t){var o;(o=i(_).open_main_menu)==null||o.apply(this,t)},be(v,"",{},{height:"100%","min-width":"var(--icon_size_md)"});var w=c(v,2);w.__click=[Ie,m];var g=c(w,2);let h;g.__click=[Le,e];var H=n(g);{var q=t=>{ge(t,{})},R=t=>{var o=le("play");l(t,o)};P(H,t=>{e().playing?t(q):t(R,!1)})}a(g);var x=c(g,2),S=n(x);xe(S,{}),a(x);var b=c(x,2);Se(b,{get project(){return i(r)}});var k=c(b,2);ie(k,20,()=>re,t=>t,(t,o)=>{var d=Ue();let B;d.__click=[Re,r,o];var U=n(d,!0);a(d),E(z=>{B=Z(d,1,"deselectable",null,B,z),C(d,"title",fe[o]),ae(U,o)},[()=>({color_d:i(r).renderers[o]})]),l(t,d)}),a(k);var A=c(k,2),J=n(A),oe=n(J);ze(oe,{}),a(J),a(A),a(y);var N=c(y,2);Ae(N,{get project(){return i(r)}});var O=c(N,2),W=n(O),X=n(W);C(X,"href",`${ee??""}/demo`);var D=c(X,2);C(D,"href",`${ee??""}/about`);var K=c(D,2),ce=n(K);ke(ce,{data:je,size:"var(--icon_size_sm)"}),a(K),a(W),a(O),a(j);var M=c(j,2),Q=n(M);Fe(Q,{get project(){return i(r)},children:(t,o)=>{var d=$(),B=G(d);{var U=z=>{Pe(z,{get scene(){return i(m)},get unit_selection(){return e().unit_selection},get width(){return i(r).renderer.width},get height(){return i(r).renderer.height},get scene_interaction_surface_state(){return e().scene_interaction_surface_state},set scene_interaction_surface_state(de){e().scene_interaction_surface_state=de}})};P(B,z=>{e().editing&&z(U)})}l(t,d)},$$slots:{default:!0}});var _e=c(Q,2);{var ve=t=>{var o=$e(),d=n(o);ye(d,{get project(){return i(r)}}),a(o),l(t,o)};P(_e,t=>{e().editing&&t(ve)})}a(M),a(p),E(t=>{h=Z(g,1,"edit_or_play color_d deselectable svelte-k28ei",null,h,t),C(g,"title",`${e().playing?"stop playing":"start playing"} [\` Backtick]`)},[()=>({selected:e().playing})]),l(u,p),L()}ne(["click"]);var Je=f('<main class="svelte-1nzn9u"><!></main>');function Ze(u,s){I(s,!0);const e=te.get();e.project.scene.units.length===0&&e.project.set_json({...e.project.toJSON(),scenes:[he()]});var _=Je(),r=n(_);Ge(r,{editor:e}),a(_),l(u,_),L()}export{Ze as component};
