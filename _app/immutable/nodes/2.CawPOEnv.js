var nt=Object.defineProperty;var Le=o=>{throw TypeError(o)};var st=(o,e,t)=>e in o?nt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Se=(o,e,t)=>st(o,typeof e!="symbol"?e+"":e,t),lt=(o,e,t)=>e.has(o)||Le("Cannot "+t);var me=(o,e,t)=>(lt(o,e,"read from private field"),t?t.call(o):e.get(o)),De=(o,e,t)=>e.has(o)?Le("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t);import{a as g,t as w,c as oe,b as he,h as it}from"../chunks/disclose-version.hpen2EY6.js";import{o as I,u as ce,W as z,K as s,aI as ot,c as r,s as i,r as a,t as D,m as N,a0 as q,f as C,L as A,a1 as ct,n as $,$ as _t}from"../chunks/runtime.BxixJYQn.js";import{s as be}from"../chunks/snippet.ODdKu9lL.js";import{a as vt,A as dt,d as ut,D as mt}from"../chunks/Dealt.D1lvKBEC.js";import{Z as ft,_ as pt,I as gt,J as ht,f as Oe,X as bt,$ as xt,a0 as yt,e as xe,a1 as wt,p as We,a2 as jt,a3 as zt,j as kt,c as St,E as Dt,R as Et,r as Pt}from"../chunks/renderer_components.Br8110jH.js";import{k as Tt,d as Z,s as P,r as Ot}from"../chunks/render.CII73B8B.js";import{p as W,c as Q,i as O}from"../chunks/props.DCp65xQH.js";import{t as fe,b as ee,a as Fe,d as qt,f as Ct,s as K,e as Ee,r as le,j as Pe}from"../chunks/string.Bu0lHRZq.js";import{t as U,s as X}from"../chunks/index.olKXB50G.js";import{b as Te}from"../chunks/preload-helper.CYsmXywa.js";import{S as Me,c as It,g as Nt}from"../chunks/logos.B6J0rxUv.js";import{b as Re}from"../chunks/paths.DCNovvWr.js";import{D as Ve}from"../chunks/Details.B5ZAQopf.js";import{o as Ke}from"../chunks/entry.CxGp5aqH.js";import{B as At}from"../chunks/Breadcrumb.ghOmMoS9.js";var Bt=(o,e,t)=>{o.target===s(e)&&t(o)},Jt=w('<div class="dialog svelte-2t3xer" role="dialog" aria-modal="true" tabindex="-1"><div class="dialog_layout svelte-2t3xer"><div class="dialog_wrapper svelte-2t3xer"><div class="dialog_bg svelte-2t3xer" aria-hidden="true"></div> <div class="dialog_content svelte-2t3xer" role="none"><!></div></div></div></div>');function Ue(o,e){I(e,!0);const t=W(e,"layout",3,"centered"),n=W(e,"index",3,0),m=W(e,"active",3,!0),p="body",f="fuz_dialog";let u=q(void 0);ce(()=>{_(e.container)});const _=c=>{if(c)z(u,Q(c));else{const b=document.getElementById(f);if(b)z(u,Q(b));else{const y=document.querySelector(p);if(!y)throw Error(`Cannot find dialog root element with selector '${p}'`);z(u,Q(document.createElement("div"))),s(u).id=f,s(u).style.display="contents",y.appendChild(s(u))}}};let l=q(void 0),d=q(void 0);const v=c=>{var b;c&&gt(c),(b=e.onclose)==null||b.call(e)},x=c=>{var b,y;if(c.key==="Escape"&&!ht(c.target)){const k=(b=s(l))==null?void 0:b.parentElement,T=(y=k==null?void 0:k.parentElement)==null?void 0:y.children,j=Array.prototype.indexOf.call(T,k);(!T||j===T.length-1||j===-1)&&v(c)}};let h=q(!1);Tt("keydown",ot,function(...c){var b;(b=m()?x:void 0)==null||b.apply(this,c)}),ft(o,{get to(){return s(u)},onmove:async()=>{var c;await pt(),z(h,!0),(c=s(l))==null||c.focus()},children:(c,b)=>{var y=Jt(),k=r(y),T=r(k),j=r(T);j.__mousedown=v;var S=i(j,2);S.__mousedown=[Bt,d,v];var E=r(S);{var F=J=>{var _e=oe(),ve=C(_e);be(ve,()=>e.children,()=>v),g(J,_e)};O(E,J=>{s(h)&&J(F)})}a(S),Te(S,J=>z(d,J),()=>s(d)),a(T),a(k),a(y),Te(y,J=>z(l,J),()=>s(l)),D(()=>{fe(y,"ready",s(h)),fe(y,"layout_page",t()==="page"),ee(y,"z-index",100+n())}),g(c,y)},$$slots:{default:!0}}),N()}Z(["mousedown"]);var Lt=w('<span class="font_mono"> </span>'),Rt=w("<a><!> <!></a>");function Wt(o,e){I(e,!0);const t=A(()=>e.path.startsWith("https://")?e.path:`https://developer.mozilla.org/en-US/docs/${qt(e.path,"/")}`),n=A(()=>e.children??Ct(e.path,"/").split("/").at(-1));var m=Rt();let p;var f=r(m);{var u=d=>{var v=Lt(),x=r(v,!0);a(v),D(()=>P(x,s(n))),g(d,v)},_=d=>{var v=oe(),x=C(v);be(x,()=>s(n)),g(d,v)};O(f,d=>{typeof s(n)=="string"?d(u):d(_,!1)})}var l=i(f,2);Me(l,{data:It,inline:!0,size:"var(--icon_size_xs)",classes:"mx_xs3"}),a(m),D(()=>p=Fe(m,p,{...e.attrs,href:s(t),class:"chip white_space_nowrap"})),g(o,m),N()}var Ft=w('<small class="indicator color_b_5 svelte-fqik3v">copied!</small>'),Mt=w('<small class="indicator color_c_5 svelte-fqik3v">failed</small>'),Vt=w("<button><!><!><!></button>");function qe(o,e){I(e,!0);let t=q(!1),n=q(!1);const m=async c=>{var b,y;if(e.text!==null){z(t,!1),z(n,!1);try{await navigator.clipboard.writeText(e.text)}catch{z(n,!0),(b=e.onclick)==null||b.call(e,null,c);return}z(t,!0),(y=e.onclick)==null||y.call(e,e.text,c)}};var p=Vt();let f;var u=r(p);{var _=c=>{var b=oe(),y=C(b);be(y,()=>e.children,()=>s(t),()=>s(n)),g(c,b)},l=c=>{var b=he("📋");g(c,b)};O(u,c=>{e.children?c(_):c(l,!1)})}var d=i(u);{var v=c=>{var b=Ft();g(c,b)};O(d,c=>{s(t)&&c(v)})}var x=i(d);{var h=c=>{var b=Mt();g(c,b)};O(x,c=>{s(n)&&c(h)})}a(p),D(()=>{var c;return f=Fe(p,f,{...e.attrs,type:"button",class:e.classes??(e.children?void 0:"icon_button size_lg"),onclick:m,disabled:((c=e.attrs)==null?void 0:c.disabled)??e.text===null},"svelte-fqik3v")}),g(o,p),N()}var ie,ge;class pe{constructor(e,t){De(this,ie,q());Se(this,"serialize");Se(this,"parse");De(this,ge,A(()=>this.serialize(this.value)));this.value=e,this.serialize=(t==null?void 0:t.serialize)??(n=>JSON.stringify(n,null,2)),this.parse=(t==null?void 0:t.parse)??JSON.parse}get value(){return s(me(this,ie))}set value(e){z(me(this,ie),Q(e))}get serialized(){return s(me(this,ge))}set_from_serialized(e){this.value=this.parse(e)}}ie=new WeakMap,ge=new WeakMap;var Kt=w('<p class="color_c_5"><strong> </strong></p>'),Ut=w('<form><div class="flex mb_md gap_md"><button type="button"> </button> <!></div> <textarea></textarea> <!></form>');function Xe(o,e){I(e,!0);const t=W(e,"parse_error",3,"failed to parse data - is it valid JSON?"),n=W(e,"title",3,"data"),m=W(e,"name",3,""),p=A(()=>e.data&&e.data instanceof pe?e.data:new pe(e.data)),f=A(()=>s(p).serialized);let u=q(void 0),_=q(""),l=q(null);const d=()=>{var S,E;if(!s(_)){(S=s(u))==null||S.focus();return}let j;try{j=s(p).parse(s(_))}catch{z(l,t());return}z(l,null),z(_,""),(E=e.onimport)==null||E.call(e,j,s(_))};ce(()=>{s(_),z(l,null)});var v=Ut(),x=r(v),h=r(x);h.__click=d;var c=r(h);a(h);var b=i(h,2);qe(b,{get text(){return s(f)},onclick:async()=>{var j,S;z(_,Q(s(f))),await ct(),(j=s(u))==null||j.select(),(S=s(u))==null||S.focus()},children:(j,S)=>{$();var E=he();D(()=>P(E,`⧉ copy ${n()??""}`)),g(j,E)},$$slots:{default:!0}}),a(x);var y=i(x,2);Ot(y),Te(y,j=>z(u,j),()=>s(u));var k=i(y,2);{var T=j=>{var S=Kt(),E=r(S),F=r(E,!0);a(E),a(S),D(()=>P(F,s(l))),U(3,S,()=>X),g(j,S)};O(k,j=>{s(l)&&j(T)})}a(v),D(()=>{h.disabled=s(_)===s(f),P(c,`↦ import ${n()??""}`),K(y,"placeholder",`${(m()?m()+" ":"")??""}JSON to import`)}),Oe(y,()=>s(_),j=>z(_,j)),g(o,v),N()}Z(["click"]);var Xt=w('<div class="panel relative"><pre class="p_xs mb_0 svelte-1a9oeig"> </pre> <div class="absolute"><!></div></div>'),Zt=w('<h2 class="mt_xl">Scene data</h2> <section><!></section> <!>',1);function Ze(o,e){I(e,!0);const t=A(()=>bt(e.scene)),n=A(()=>new pe(s(t)));var m=Zt(),p=i(C(m),2),f=r(p);Xe(f,{get data(){return s(n)},title:"scene data",name:"Scene",onimport:(_,l)=>{var d;e.scene.reset(_),(d=e.onimport)==null||d.call(e,_,l)}}),a(p);var u=i(p,2);Ve(u,{summary:l=>{$();var d=he("View raw scene data");g(l,d)},children:(l,d)=>{var v=Xt(),x=r(v),h=r(x,!0);a(x);var c=i(x,2);ee(c,"right","var(--size_lg)"),ee(c,"top","var(--size_lg)");var b=r(c);qe(b,{get text(){return s(n).serialized}}),a(c),a(v),D(()=>P(h,s(n).serialized)),g(l,v)},$$slots:{summary:!0,default:!0}}),g(o,m),N()}var Gt=(o,e,t)=>{const n=e.create();t.project.create_scene(n)},Ht=w('<button type="button"><span class="size_xl3 mr_sm"> </span> </button>'),Qt=w('<div><button type="button" class="white_space_nowrap"> </button></div>'),Yt=w('<h3>Load scene</h3> <section class="row gap_md flex_wrap"></section>',1),$t=w('<h2 class="mt_xl">Scenes</h2> <h3>Create new scene</h3> <section class="row gap_md flex_wrap"></section> <!>',1);function Ge(o,e){I(e,!0);var t=$t(),n=i(C(t),4);Ee(n,20,()=>xt,f=>f,(f,u)=>{var _=Ht();_.__click=[Gt,u,e];var l=r(_),d=r(l,!0);a(l);var v=i(l);a(_),D(()=>{K(_,"title",`create scene: ${u.name??""}`),P(d,u.glyph),P(v,` ${u.name??""}`)}),g(f,_)}),a(n);var m=i(n,2);{var p=f=>{var u=Yt(),_=i(C(u),2);Ee(_,21,()=>e.project.scenes,l=>l.id,(l,d)=>{var v=Qt();const x=A(()=>e.project.selected_scene_id===s(d).id);var h=r(v),c=A(()=>s(x)?void 0:()=>{s(d).load(),e.project.select_scene(s(d).id)});h.__click=function(...y){var k;(k=s(c))==null||k.apply(this,y)};var b=r(h);a(h),a(v),D(()=>{fe(h,"selected",s(x)),P(b,`${s(d).glyph??""}
					${s(d).name??""}`)}),U(3,v,()=>X,()=>({axis:"x"})),g(l,v)}),a(_),g(f,u)};O(m,f=>{e.project.scenes.length&&f(p)})}g(o,t),N()}Z(["click"]);var ea=(o,e,t)=>{const{value:n}=o.currentTarget;z(e,Q(yt(n))),s(e)===null&&(t().glyph=n)},ta=w('<div><strong class="color_c_5"> </strong></div>'),aa=w('<header class="row mb_lg size_xl3"><span class="icon_size_lg pr_xl"> </span> </header> <form class="flex flex_column gap_md width_sm"><label><div class="title">name</div> <input placeholder="project name"></label> <label><div class="title">glyph</div> <input placeholder="project glyph"> <!></label></form>',1);function ra(o,e){I(e,!0);const t=W(e,"project",7);let n=q(null);var m=aa(),p=C(m),f=r(p),u=r(f,!0);a(f);var _=i(f);a(p);var l=i(p,2),d=r(l),v=i(r(d),2);le(v),a(d);var x=i(d,2),h=i(r(x),2);le(h),h.__input=[ea,n,t];var c=i(h,2);{var b=y=>{var k=ta(),T=r(k),j=r(T,!0);a(T),a(k),D(()=>P(j,s(n))),U(3,k,()=>X),g(y,k)};O(c,y=>{s(n)&&y(b)})}a(x),a(l),D(()=>{P(u,t().glyph),P(_,` ${t().name??""}`),K(v,"title",`project name for ${t().glyph??""}`),Pe(h,t().glyph),K(h,"title",`project glyph for ${t().name??""}`)}),Oe(v,()=>t().name,y=>t().name=y),g(o,m),N()}Z(["input"]);var na=(o,e)=>z(e,!s(e)),sa=(o,e,t,n)=>{e.project.delete_scene(t.scene.id),z(n,!1)},la=w('<div><button type="button" class="w_100 color_c selected deselectable"><div class="size_xl3">✕</div> <div class="ml_lg text_align_left">permanently delete scene<br> </div></button></div>'),ia=w('<button type="button" class="w_100 color_c">delete scene</button> <!>',1);function oa(o,e){I(e,!0);const t=xe.get();let n=q(!1);ce(()=>{e.scene.id,z(n,!1)});var m=ia(),p=C(m);p.__click=[na,n];var f=i(p,2);{var u=_=>{var l=la(),d=r(l);d.__pointerup=[sa,t,e,n];var v=i(r(d),2),x=i(r(v),2);a(v),a(d),a(l),D(()=>P(x,`${e.scene.glyph??""}
				${e.scene.name??""}`)),U(3,l,()=>X),g(_,l)};O(f,_=>{s(n)&&_(u)})}g(o,m),N()}Z(["click","pointerup"]);var ca=(o,e,t)=>{const{value:n}=o.currentTarget;z(e,Q(wt(n))),s(e)===null&&(t().glyph=n)},_a=w('<div><strong class="color_c_5"> </strong></div>'),va=(o,e)=>e().save(),da=(o,e,t)=>e.project.duplicate_scene(t()),ua=w('<form class="flex flex_column gap_md width_sm"><fieldset><label><div class="title">name</div> <input placeholder="scene name" title="scene name"></label> <label><div class="title">glyph</div> <input placeholder="scene glyph"> <!></label> <label><div class="title">id</div> <input disabled title="scene id"></label></fieldset> <fieldset class="gap_md"><button type="button" class="color_a">save scene</button> <button type="button">duplicate scene</button></fieldset> <fieldset><h3 class="color_c_5">Delete scene</h3> <!></fieldset></form>');function He(o,e){I(e,!0);const t=W(e,"scene",7);let n=q(null);var m=ua(),p=r(m),f=r(p),u=i(r(f),2);le(u),a(f);var _=i(f,2),l=i(r(_),2);le(l),l.__input=[ca,n,t];var d=i(l,2);{var v=j=>{var S=_a(),E=r(S),F=r(E,!0);a(E),a(S),D(()=>P(F,s(n))),U(3,S,()=>X),g(j,S)};O(d,j=>{s(n)&&j(v)})}a(_);var x=i(_,2),h=i(r(x),2);le(h),a(x),a(p);var c=i(p,2),b=r(c);b.__click=[va,t];var y=i(b,2);y.__click=[da,e,t],a(c);var k=i(c,2),T=i(r(k),2);oa(T,{get scene(){return t()}}),a(k),a(m),D(()=>{Pe(l,t().glyph),K(l,"title",`scene glyph for ${t().name??""}`),Pe(h,t().id)}),Oe(u,()=>t().name,j=>t().name=j),g(o,m),N()}Z(["input","click"]);var ma=w('<div class="panel relative"><pre class="p_xs mb_0 svelte-1a9oeig"> </pre> <div class="absolute"><!></div></div>'),fa=w('<h2 class="mt_xl">Project data</h2> <section><!></section> <!>',1);function pa(o,e){I(e,!0);const t=A(()=>new pe(e.project.json));var n=fa(),m=i(C(n),2),p=r(m);Xe(p,{get data(){return s(t)},title:"project data",name:"Project",onimport:(u,_)=>{var l;e.project.set_json(We(u)),(l=e.onimport)==null||l.call(e,u,_)}}),a(m);var f=i(m,2);Ve(f,{summary:_=>{$();var l=he("View raw project data");g(_,l)},children:(_,l)=>{var d=ma(),v=r(d),x=r(v,!0);a(v);var h=i(v,2);ee(h,"right","var(--size_lg)"),ee(h,"top","var(--size_lg)");var c=r(h);qe(c,{get text(){return s(t).serialized}}),a(h),a(d),D(()=>P(x,s(t).serialized)),g(_,d)},$$slots:{summary:!0,default:!0}}),g(o,n),N()}var ga=(o,e)=>z(e,!s(e)),ha=(o,e,t,n)=>{var m;e.delete_project(t.project.id),z(n,!1),(m=o.currentTarget.closest(".dialog"))==null||m.scrollTo({top:0,behavior:"smooth"})},ba=w('<div><button type="button" class="w_100 color_c selected deselectable"><div class="size_xl3">✕</div> <div class="ml_lg text_align_left">permanently delete project<br> </div></button></div>'),xa=w('<button type="button" class="w_100 color_c">delete project</button> <!>',1);function ya(o,e){I(e,!0);const t=xe.get();let n=q(!1);ce(()=>{e.project.id,z(n,!1)});var m=xa(),p=C(m);p.__pointerup=[ga,n];var f=i(p,2);{var u=_=>{var l=ba(),d=r(l);d.__pointerup=[ha,t,e,n];var v=i(r(d),2),x=i(r(v),2);a(v),a(d),a(l),D(()=>P(x,`${e.project.glyph??""}
				${e.project.name??""}`)),U(3,l,()=>X),g(_,l)};O(f,_=>{s(n)&&_(u)})}g(o,m),N()}Z(["pointerup"]);var wa=w('<div class="w_100 py_xs"><button type="button" class="w_100 color_d text_align_left justify_content_start"><div class="size_xl3 mr_lg"> </div> <div class="ellipsis"> </div></button></div>'),ja=(o,e)=>{e.create_project(We({name:jt(e.projects),scenes:[zt(kt())]}))},za=w('<div class="pane p_lg width_sm"><h2 class="mt_0 mb_lg row pr_md"><span class="icon_size_lg">🏞</span> projects</h2> <div class="flex flex_column flex_wrap w_100"><!> <button type="button" title="create a new project" class="w_100 mt_xs justify_content_start"><div class="row white_space_nowrap"><span class="size_xl3 mr_lg line_height_1">+</span> create new project</div></button></div></div>'),ka=w('<span class="size_xl">🔮</span>'),Sa=(o,e)=>z(e,!s(e)),Da=()=>{localStorage.clear(),location.reload()},Ea=w('<div><button type="button" class="w_100 color_c selected deselectable"><div class="size_xl3">✕</div> <div class="ml_lg text_align_left">permanently delete<br>all locally saved data</div></button></div>'),Pa=w('<div class="pane p_xl mb_xl3"><section><!></section> <section><!></section></div> <div class="pane p_xl mb_xl3"><section><!></section> <section><h3>Edit scene</h3> <!></section></div> <div class="pane p_lg mb_xl3"><!></div> <div class="pane p_xl mb_xl3 shadow_c_xl"><h2 class="mt_xl color_c_5 font_weight_600">Danger zone</h2> <section class="width_sm"><!></section> <section><h3 class="mt_xl">Storage</h3> <div><p class="width_sm">Data is saved locally on your computer using <!>.</p>  <div class="width_sm"><button type="button" class="w_100 color_c">clear all saved data</button> <!></div></div></section></div>',1),Ta=w('<div class="main_menu svelte-15asqit"><div class="sidebar gap_xl3 svelte-15asqit"><!> <div class="box"><div class="box pane p_xs2"><div class="box p_xl3 gap_xl3 radius_sm shadow_md"><!> <nav><ul class="flex flex_column gap_sm unstyled"><li><a class="chip w_100 box px_md py_xs">demos</a></li> <li><a class="chip w_100 box px_md py_xs">about</a></li> <li><a class="chip w_100 box p_md pb_xs white_space_nowrap" href="https://github.com/ryanatkn/dealt"><!> source</a></li></ul></nav></div></div></div> <div class="box"><div class="box row pane"><div class="icon_size_lg" title="dealt">🔮</div></div></div></div> <div class="content svelte-15asqit"><!></div></div>');function Oa(o,e){I(e,!0);let t=q(!1);const n=xe.maybe_get(),m=A(()=>n==null?void 0:n.project);Ke(()=>{e.app.show_main_menu&&e.app.close_main_menu()});var p=oe(),f=C(p);{var u=_=>{Ue(_,{get onclose(){return e.app.close_main_menu},layout:"page",children:(l,d)=>{var v=Ta(),x=r(v),h=r(x);{var c=L=>{var G=za(),M=i(r(G),2),Y=r(M);Ee(Y,16,()=>n.projects,te=>te,(te,B)=>{var V=wa();const ae=A(()=>n.selected_project_id===B.id);var R=r(V),ye=A(()=>s(ae)?void 0:()=>{n.select_project(B.id)});R.__click=function(...je){var se;(se=s(ye))==null||se.apply(this,je)};var H=r(R),we=r(H,!0);a(H);var re=i(H,2),ne=r(re,!0);a(re),a(R),a(V),D(()=>{K(R,"title",s(ae)?`${B.glyph} ${B.name} is selected`:`select project ${B.glyph} ${B.name}`),fe(R,"selected",s(ae)),ee(R,"flex-wrap","nowrap"),P(we,B.glyph),P(ne,B.name)}),U(3,V,()=>X),g(te,V)});var de=i(Y,2);de.__click=[ja,n],a(M),a(G),g(L,G)};O(h,L=>{n&&L(c)})}var b=i(h,2),y=r(b),k=r(y),T=r(k);At(T,{children:(L,G)=>{var M=ka();g(L,M)},$$slots:{default:!0}});var j=i(T,2),S=r(j),E=r(S),F=r(E);K(F,"href",`${Re??""}/demo`),a(E);var J=i(E,2),_e=r(J);K(_e,"href",`${Re??""}/about`),a(J);var ve=i(J,2),Ce=r(ve),Qe=r(Ce);Me(Qe,{data:Nt,size:"var(--icon_size_md)"}),$(),a(Ce),a(ve),a(S),a(j),a(k),a(y),a(b),$(2),a(x);var Ie=i(x,2),Ye=r(Ie);{var $e=L=>{var G=Pa(),M=C(G),Y=r(M),Ne=r(Y);ra(Ne,{get project(){return s(m)}}),a(Y);var de=i(Y,2),te=r(de);pa(te,{get project(){return s(m)}}),a(de),a(M);var B=i(M,2),V=r(B),ae=r(V);Ge(ae,{get project(){return n.project}}),a(V);var R=i(V,2),ye=i(r(R),2);He(ye,{get scene(){return n.project.scene},get project(){return n.project}}),a(R),a(B);var H=i(B,2),we=r(H);Ze(we,{get scene(){return n.project.scene}}),a(H);var re=i(H,2),ne=i(r(re),2),je=r(ne);ya(je,{get project(){return s(m)}}),a(ne);var se=i(ne,2),Ae=i(r(se),2),ze=r(Ae),et=i(r(ze));Wt(et,{path:"Web/API/Window/localStorage"}),$(),a(ze);var Be=i(ze,2),Je=r(Be);Je.__click=[Sa,t];var tt=i(Je,2);{var at=ke=>{var ue=Ea(),rt=r(ue);rt.__pointerup=[Da],a(ue),U(3,ue,()=>X),g(ke,ue)};O(tt,ke=>{s(t)&&ke(at)})}a(Be),a(Ae),a(se),a(re),g(L,G)};O(Ye,L=>{n&&s(m)&&L($e)})}a(Ie),a(v),g(l,v)},$$slots:{default:!0}})};O(f,_=>{e.app.show_main_menu&&_(u)})}g(o,p),N()}Z(["click","pointerup"]);var qa=w('<div class="scene_menu width_md svelte-1rvxfq4"><div class="pane p_xl mb_xl3"><section><!></section> <section><h3>Edit scene</h3> <!></section></div> <div class="pane p_lg mb_xl3 width_md"><!></div></div>');function Ca(o,e){I(e,!0);const t=W(e,"editor",7);Ke(()=>{t().show_scene_menu&&(t().show_scene_menu=!1)});var n=oe(),m=C(n);{var p=f=>{Ue(f,{onclose:()=>t().show_scene_menu=!t().show_scene_menu,layout:"page",children:(u,_)=>{var l=qa(),d=r(l),v=r(d),x=r(v);Ge(x,{get project(){return t().project}}),a(v);var h=i(v,2),c=i(r(h),2);He(c,{get scene(){return t().project.scene},get project(){return t().project}}),a(h),a(d);var b=i(d,2),y=r(b);Ze(y,{get scene(){return t().project.scene}}),a(b),a(l),g(u,l)},$$slots:{default:!0}})};O(m,f=>{t().show_scene_menu&&f(p)})}g(o,n),N()}var Ia=w("<!> <!> <!>",1),Na=w("<!> <!>",1);function Ya(o,e){I(e,!0);const t=new Et(Pt,"pixi",300,300),n=vt.set(new dt({renderer:t}));St.set(n.clock),globalThis.app=n;const m=xe.set(new Dt({app:n}));let p=!1;ce(()=>{const l=n.json;p?(console.log("[layout] saving app json",l),n.save(l)):(console.log("[layout] initing app json",l),p=!0)});var f=Na();it(l=>{_t.title="Dealt: editor"});var u=C(f);ut(u,{});var _=i(u,2);mt(_,{children:(l,d)=>{var v=Ia(),x=C(v);be(x,()=>e.children);var h=i(x,2);Oa(h,{app:n});var c=i(h,2);Ca(c,{editor:m}),g(l,v)},$$slots:{default:!0}}),g(o,f),N()}export{Ya as component};
