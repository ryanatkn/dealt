import{a as l,t as h,c as q,b as le}from"../chunks/disclose-version.hpen2EY6.js";import{t as B,m as C,o as F,c as n,r,_ as ue,W as Q,f as D,a0 as T,K as o,s as c,D as pe,L as A}from"../chunks/runtime.BxixJYQn.js";import{e as ee,b as V,a as te,r as me,P as fe,i as ge,j as he}from"../chunks/renderer_components.Br8110jH.js";import{d as re,s as ae}from"../chunks/render.CII73B8B.js";import{p as ne,i as z}from"../chunks/props.DCp65xQH.js";import{e as se,b as X,s as L,t as Y}from"../chunks/string.Bu0lHRZq.js";import{b as Z}from"../chunks/paths.DCNovvWr.js";import{S as be,g as je}from"../chunks/logos.B6J0rxUv.js";import{U as ke}from"../chunks/Unit_List_And_Layers.sNWw2TWY.js";import{a as ye,F as we,S as xe,b as Se}from"../chunks/Fps_Indicator.Dwbq6601.js";import{s as ze}from"../chunks/snippet.ODdKu9lL.js";import{U as Pe}from"../chunks/User_Input_Info.B5ugMjFl.js";var Ie=h('<div class="scene_summary svelte-10m7391"><button class="plain svelte-10m7391" type="button"> </button></div>');function Ue(u,s){F(s,!0);const e=ee.get();var d=Ie(),t=n(d);t.__click=()=>e.show_scene_menu=!0;var m=n(t,!0);r(t),r(d),B(()=>ae(m,s.project.scene.name)),l(u,d),C()}re(["click"]);var Le=h('<div class="flex w_100 relative"><!> <!></div>'),Ae=h('<div class="project_renderer svelte-17hjpql"><!></div>');function Ce(u,s){F(s,!0);const e=ne(s,"project",7),d=A(()=>e().scene);let t=T(void 0),m=T(void 0);ue(()=>{o(t)!==void 0&&(e().renderer.width=o(t)),o(m)!==void 0&&(e().renderer.height=o(m)/e().renderer_count)});var p=Ae(),j=n(p);{var k=_=>{var y=q(),f=D(y);se(f,16,()=>te,w=>w,(w,P)=>{var I=q(),x=D(I);{var R=b=>{var g=Le(),S=n(g);ye(S,{get Component(){return me[P]},get scene(){return o(d)},get renderer(){return e().renderer}});var U=c(S,2);ze(U,()=>s.children??pe),r(g),l(b,g)};z(x,b=>{e().renderers[P]&&b(R)})}l(w,I)}),l(_,y)};z(j,_=>{_(k)})}r(p),V(p,"clientWidth",_=>Q(t,_)),V(p,"clientHeight",_=>Q(m,_)),l(u,p),C()}var Fe=(u,s)=>o(s).save(),Re=(u,s)=>{s().toggle_playing()},We=(u,s,e)=>{o(s).toggle_renderer(e)},$e=h('<button type="button" class="deselectable"> </button>'),qe=h('<div class="right_sidebar svelte-1hjdne2"><!></div>'),Be=h('<div class="project_editor svelte-1hjdne2"><nav class="top_nav svelte-1hjdne2"><div class="scene_controls svelte-1hjdne2"><button class="icon_button plain" type="button">â˜°</button> <button type="button" class="plain">save</button> <button type="button" class="edit_or_play color_d deselectable svelte-1hjdne2"><!></button> <div class="row"><!></div> <!> <div class="row align_items_stretch shadow_inset_xs"></div> <div class="row pl_md"><span><!></span></div></div> <!> <header class="flex"><div class="row ml_auto"><a class="nav_link svelte-1hjdne2">demos</a> <a class="nav_link svelte-1hjdne2">about</a> <a class="nav_link svelte-1hjdne2" href="https://github.com/ryanatkn/dealt"><!></a></div></header></nav> <div class="content svelte-1hjdne2"><!> <!></div></div>');function De(u,s){F(s,!0);const e=ne(s,"editor",7),d=A(()=>e().app),t=A(()=>e().project),m=A(()=>o(t).scene);var p=Be(),j=n(p),k=n(j),_=n(k);_.__click=function(...a){var i;(i=o(d).open_main_menu)==null||i.apply(this,a)},X(_,"height","100%"),X(_,"min-width","var(--icon_size_md)");var y=c(_,2);y.__click=[Fe,m];var f=c(y,2);f.__click=[Re,e];var w=n(f);{var P=a=>{fe(a,{})},I=a=>{var i=le("play");l(a,i)};z(w,a=>{e().playing?a(P):a(I,!1)})}r(f);var x=c(f,2),R=n(x);we(R,{}),r(x);var b=c(x,2);xe(b,{get project(){return o(t)}});var g=c(b,2);se(g,20,()=>te,a=>a,(a,i)=>{var v=$e();v.__click=[We,t,i];var W=n(v,!0);r(v),B(()=>{L(v,"title",ge[i]),Y(v,"color_d",o(t).renderers[i]),ae(W,i)}),l(a,v)}),r(g);var S=c(g,2),U=n(S),oe=n(U);Pe(oe,{play:!0,edit:!0}),r(U),r(S),r(k);var E=c(k,2);Ue(E,{get project(){return o(t)}});var H=c(E,2),J=n(H),K=n(J);L(K,"href",`${Z??""}/demo`);var N=c(K,2);L(N,"href",`${Z??""}/about`);var O=c(N,2),ie=n(O);be(ie,{data:je,size:"var(--icon_size_sm)"}),r(O),r(J),r(H),r(j);var G=c(j,2),M=n(G);Ce(M,{get project(){return o(t)},children:(a,i)=>{var v=q(),W=D(v);{var de=$=>{Se($,{get scene(){return o(m)},get unit_selection(){return e().unit_selection},get width(){return o(t).renderer.width},get height(){return o(t).renderer.height},get scene_interaction_surface_state(){return e().scene_interaction_surface_state},set scene_interaction_surface_state(ve){e().scene_interaction_surface_state=ve}})};z(W,$=>{e().editing&&$(de)})}l(a,v)},$$slots:{default:!0}});var ce=c(M,2);{var _e=a=>{var i=qe(),v=n(i);ke(v,{get project(){return o(t)}}),r(i),l(a,i)};z(ce,a=>{e().editing&&a(_e)})}r(G),r(p),B(()=>{L(f,"title",`${(e().playing?"stop playing":"start playing")??""} [\` Backtick]`),Y(f,"selected",e().playing)}),l(u,p),C()}re(["click"]);var Ee=h('<main class="svelte-1nzn9u"><!></main>');function Ze(u,s){F(s,!0);const e=ee.get();e.project.scene.units.length===0&&e.project.set_json({...e.project.toJSON(),scenes:[he()]});var d=Ee(),t=n(d);De(t,{editor:e}),r(d),l(u,d),C()}export{Ze as component};
