import{a as l,t as h,c as U,b as le}from"../chunks/disclose-version.q2jLZV-J.js";import{m as W,o as B,q as C,c as n,r,_ as ue,W as Q,v as $,a0 as T,K as o,s as c,D as pe,L as A}from"../chunks/runtime.SGEKD4Mg.js";import{e as ee,b as V,a as te,r as me,P as ge,i as fe,j as he}from"../chunks/renderer_components.C_VggXIj.js";import{d as re,s as ae}from"../chunks/render.DBRt5oD9.js";import{p as ne,i as z}from"../chunks/props.CnXMf3nV.js";import{e as se,b as X,s as q,t as Y}from"../chunks/string.BgPVBQXn.js";import{b as Z}from"../chunks/paths.aIZw4qcD.js";import{S as be,g as je}from"../chunks/logos.CgAZOwdU.js";import{U as ke}from"../chunks/Unit_List_And_Layers.BbnGVA5y.js";import{a as ye,F as we,S as xe,H as Se,b as ze}from"../chunks/Help_Button.BQIk4--D.js";import{s as Pe}from"../chunks/snippet.PgYwo71m.js";var He=h('<div class="scene_summary svelte-10m7391"><button class="plain svelte-10m7391" type="button"> </button></div>');function Le(u,s){C(s,!0);const e=ee.get();var d=He(),t=n(d);t.__click=()=>e.show_scene_menu=!0;var m=n(t,!0);r(t),r(d),W(()=>ae(m,s.project.scene.name)),l(u,d),B()}re(["click"]);var qe=h('<div class="flex w_100 relative"><!> <!></div>'),Ae=h('<div class="project_renderer svelte-17hjpql"><!></div>');function Be(u,s){C(s,!0);const e=ne(s,"project",7),d=A(()=>e().scene);let t=T(void 0),m=T(void 0);ue(()=>{o(t)!==void 0&&(e().renderer.width=o(t)),o(m)!==void 0&&(e().renderer.height=o(m)/e().renderer_count)});var p=Ae(),j=n(p);{var k=_=>{var y=U(),g=$(y);se(g,16,()=>te,w=>w,(w,P)=>{var H=U(),x=$(H);{var F=b=>{var f=qe(),S=n(f);ye(S,{get Component(){return me[P]},get scene(){return o(d)},get renderer(){return e().renderer}});var L=c(S,2);Pe(L,()=>s.children??pe),r(f),l(b,f)};z(x,b=>{e().renderers[P]&&b(F)})}l(w,H)}),l(_,y)};z(j,_=>{_(k)})}r(p),V(p,"clientWidth",_=>Q(t,_)),V(p,"clientHeight",_=>Q(m,_)),l(u,p),B()}var Ce=(u,s)=>o(s).save(),Fe=(u,s)=>{s().toggle_playing()},Ie=(u,s,e)=>{o(s).toggle_renderer(e)},Re=h('<button type="button" class="deselectable"> </button>'),Ue=h('<div class="right_sidebar svelte-1hjdne2"><!></div>'),We=h('<div class="project_editor svelte-1hjdne2"><nav class="top_nav svelte-1hjdne2"><div class="scene_controls svelte-1hjdne2"><button class="icon_button plain" type="button">â˜°</button> <button type="button" class="plain">save</button> <button type="button" class="edit_or_play color_d deselectable svelte-1hjdne2"><!></button> <div class="row"><!></div> <!> <div class="row align_items_stretch shadow_inset_xs pl_md"></div> <div class="row pl_md"><span><!></span></div></div> <!> <header class="flex"><div class="row ml_auto"><a class="nav_link svelte-1hjdne2">demos</a> <a class="nav_link svelte-1hjdne2">about</a> <a class="nav_link svelte-1hjdne2" href="https://github.com/ryanatkn/dealt"><!></a></div></header></nav> <div class="content svelte-1hjdne2"><!> <!></div></div>');function $e(u,s){C(s,!0);const e=ne(s,"editor",7),d=A(()=>e().app),t=A(()=>e().project),m=A(()=>o(t).scene);var p=We(),j=n(p),k=n(j),_=n(k);_.__click=function(...a){var i;(i=o(d).open_main_menu)==null||i.apply(this,a)},X(_,"height","100%"),X(_,"min-width","var(--icon_size_md)");var y=c(_,2);y.__click=[Ce,m];var g=c(y,2);g.__click=[Fe,e];var w=n(g);{var P=a=>{ge(a,{})},H=a=>{var i=le("play");l(a,i)};z(w,a=>{e().playing?a(P):a(H,!1)})}r(g);var x=c(g,2),F=n(x);we(F,{}),r(x);var b=c(x,2);xe(b,{get project(){return o(t)}});var f=c(b,2);se(f,20,()=>te,a=>a,(a,i)=>{var v=Re();v.__click=[Ie,t,i];var I=n(v,!0);r(v),W(()=>{q(v,"title",fe[i]),Y(v,"color_d",o(t).renderers[i]),ae(I,i)}),l(a,v)}),r(f);var S=c(f,2),L=n(S),oe=n(L);Se(oe,{}),r(L),r(S),r(k);var D=c(k,2);Le(D,{get project(){return o(t)}});var E=c(D,2),J=n(E),K=n(J);q(K,"href",`${Z??""}/demo`);var N=c(K,2);q(N,"href",`${Z??""}/about`);var O=c(N,2),ie=n(O);be(ie,{data:je,size:"var(--icon_size_sm)"}),r(O),r(J),r(E),r(j);var G=c(j,2),M=n(G);Be(M,{get project(){return o(t)},children:(a,i)=>{var v=U(),I=$(v);{var de=R=>{ze(R,{get scene(){return o(m)},get unit_selection(){return e().unit_selection},get width(){return o(t).renderer.width},get height(){return o(t).renderer.height},get scene_interaction_surface_state(){return e().scene_interaction_surface_state},set scene_interaction_surface_state(ve){e().scene_interaction_surface_state=ve}})};z(I,R=>{e().editing&&R(de)})}l(a,v)},$$slots:{default:!0}});var ce=c(M,2);{var _e=a=>{var i=Ue(),v=n(i);ke(v,{get project(){return o(t)}}),r(i),l(a,i)};z(ce,a=>{e().editing&&a(_e)})}r(G),r(p),W(()=>{q(g,"title",`${(e().playing?"stop playing":"start playing")??""} [\` Backtick]`),Y(g,"selected",e().playing)}),l(u,p),B()}re(["click"]);var De=h('<main class="svelte-1nzn9u"><!></main>');function Ye(u,s){C(s,!0);const e=ee.get();e.project.scene.units.length===0&&e.project.set_json({...e.project.toJSON(),scenes:[he()]});var d=De(),t=n(d);$e(t,{editor:e}),r(d),l(u,d),B()}export{Ye as component};
