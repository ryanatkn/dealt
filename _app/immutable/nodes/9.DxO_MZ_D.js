import{a as l,t as h,c as U,b as le}from"../chunks/disclose-version.Ds06f9Vu.js";import{m as W,o as B,q as C,c as n,r,_ as ue,W as Q,v as $,a0 as T,K as i,s as c,D as pe,L as A}from"../chunks/runtime.5k9ShzZt.js";import{e as ee,b as V,a as te,r as me,P as ge,i as fe,j as he}from"../chunks/renderer_components.BRuy53NI.js";import{d as re,s as ae}from"../chunks/render.CAjsxhF5.js";import{p as ne,i as z}from"../chunks/props.lofZ2jro.js";import{e as se,b as X,s as q,t as Y}from"../chunks/string.25aLtQ0-.js";import{b as Z}from"../chunks/paths.C59Pxw6O.js";import{S as be,g as ke}from"../chunks/logos.BWdFsbh_.js";import{U as je}from"../chunks/Unit_List_And_Layers.muQOCGVD.js";import{a as ye,F as we,S as xe,H as Se,b as ze}from"../chunks/Help_Button.BJ7_0PQ1.js";import{s as Pe}from"../chunks/snippet.CcawutmI.js";var He=h('<div class="scene_summary svelte-10m7391"><button class="plain svelte-10m7391" type="button"> </button></div>');function Le(u,s){C(s,!0);const e=ee.get();var v=He(),t=n(v);t.__click=()=>e.show_scene_menu=!0;var m=n(t,!0);r(t),r(v),W(()=>ae(m,s.project.scene.name)),l(u,v),B()}re(["click"]);var qe=h('<div class="flex w_100 relative"><!> <!></div>'),Ae=h('<div class="project_renderer svelte-17hjpql"><!></div>');function Be(u,s){C(s,!0);const e=ne(s,"project",7),v=A(()=>e().scene);let t=T(void 0),m=T(void 0);ue(()=>{i(t)!==void 0&&(e().renderer.width=i(t)),i(m)!==void 0&&(e().renderer.height=i(m)/e().renderer_count)});var p=Ae(),k=n(p);{var j=_=>{var y=U(),g=$(y);se(g,16,()=>te,w=>w,(w,P)=>{var H=U(),x=$(H);{var F=b=>{var f=qe(),S=n(f);ye(S,{get Component(){return me[P]},get scene(){return i(v)},get renderer(){return e().renderer}});var L=c(S,2);Pe(L,()=>s.children??pe),r(f),l(b,f)};z(x,b=>{e().renderers[P]&&b(F)})}l(w,H)}),l(_,y)};z(k,_=>{_(j)})}r(p),V(p,"clientWidth",_=>Q(t,_)),V(p,"clientHeight",_=>Q(m,_)),l(u,p),B()}var Ce=(u,s)=>i(s).save(),Fe=(u,s)=>{s().toggle_playing()},Ie=(u,s,e)=>{i(s).toggle_renderer(e)},Re=h('<button type="button" class="deselectable"> </button>'),Ue=h('<div class="right_sidebar svelte-k28ei"><!></div>'),We=h('<div class="project_editor svelte-k28ei"><nav class="top_nav svelte-k28ei"><div class="scene_controls svelte-k28ei"><button class="icon_button plain" type="button">â˜°</button> <button type="button" class="plain">save</button> <button type="button" class="edit_or_play color_d deselectable svelte-k28ei"><!></button> <div class="row"><!></div> <!> <div class="row align_items_stretch shadow_inset_xs pl_md"></div> <div class="row pl_md"><span><!></span></div></div> <!> <header class="flex"><div class="row ml_auto"><a class="nav_link svelte-k28ei">demos</a> <a class="nav_link svelte-k28ei">about</a> <a class="nav_link svelte-k28ei" href="https://github.com/ryanatkn/dealt"><!></a></div></header></nav> <div class="content svelte-k28ei"><!> <!></div></div>');function $e(u,s){C(s,!0);const e=ne(s,"editor",7),v=A(()=>e().app),t=A(()=>e().project),m=A(()=>i(t).scene);var p=We(),k=n(p),j=n(k),_=n(j);_.__click=function(...a){var o;(o=i(v).open_main_menu)==null||o.apply(this,a)},X(_,"height","100%"),X(_,"min-width","var(--icon_size_md)");var y=c(_,2);y.__click=[Ce,m];var g=c(y,2);g.__click=[Fe,e];var w=n(g);{var P=a=>{ge(a,{})},H=a=>{var o=le("play");l(a,o)};z(w,a=>{e().playing?a(P):a(H,!1)})}r(g);var x=c(g,2),F=n(x);we(F,{}),r(x);var b=c(x,2);xe(b,{get project(){return i(t)}});var f=c(b,2);se(f,20,()=>te,a=>a,(a,o)=>{var d=Re();d.__click=[Ie,t,o];var I=n(d,!0);r(d),W(()=>{q(d,"title",fe[o]),Y(d,"color_d",i(t).renderers[o]),ae(I,o)}),l(a,d)}),r(f);var S=c(f,2),L=n(S),ie=n(L);Se(ie,{}),r(L),r(S),r(j);var D=c(j,2);Le(D,{get project(){return i(t)}});var E=c(D,2),J=n(E),K=n(J);q(K,"href",`${Z??""}/demo`);var N=c(K,2);q(N,"href",`${Z??""}/about`);var O=c(N,2),oe=n(O);be(oe,{data:ke,size:"var(--icon_size_sm)"}),r(O),r(J),r(E),r(k);var G=c(k,2),M=n(G);Be(M,{get project(){return i(t)},children:(a,o)=>{var d=U(),I=$(d);{var ve=R=>{ze(R,{get scene(){return i(m)},get unit_selection(){return e().unit_selection},get width(){return i(t).renderer.width},get height(){return i(t).renderer.height},get scene_interaction_surface_state(){return e().scene_interaction_surface_state},set scene_interaction_surface_state(de){e().scene_interaction_surface_state=de}})};z(I,R=>{e().editing&&R(ve)})}l(a,d)},$$slots:{default:!0}});var ce=c(M,2);{var _e=a=>{var o=Ue(),d=n(o);je(d,{get project(){return i(t)}}),r(o),l(a,o)};z(ce,a=>{e().editing&&a(_e)})}r(G),r(p),W(()=>{q(g,"title",`${(e().playing?"stop playing":"start playing")??""} [\` Backtick]`),Y(g,"selected",e().playing)}),l(u,p),B()}re(["click"]);var De=h('<main class="svelte-1nzn9u"><!></main>');function Ye(u,s){C(s,!0);const e=ee.get();e.project.scene.units.length===0&&e.project.set_json({...e.project.toJSON(),scenes:[he()]});var v=De(),t=n(v);$e(t,{editor:e}),r(v),l(u,v),B()}export{Ye as component};
